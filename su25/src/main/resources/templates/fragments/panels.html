<!-- Alternate Panels Fragment -->
<section th:fragment="panels">
    <section id="profilePanel" class="card profile-card" hidden data-panel="profile">
        <div class="header profile-header" style="flex-direction:column;align-items:center;gap:0;">
            <div style="display:flex;flex-direction:column;align-items:center;gap:8px;width:100%;">
                <div class="avatar-edit-wrap">
          <span class="avatar lg profile-avatar-center" style="position:relative;display:flex;justify-content:center;align-items:center;">
            <img th:if="${user != null and !#strings.isEmpty(#strings.trim(user.avatarUrl))}" th:src="${user.avatarUrl}" src="/img/avatar_default.jpg" alt="Avatar" onerror="this.onerror=null;this.src='/img/avatar_default.jpg';" width="120" height="120" fetchpriority="high" decoding="async" style="max-width:120px;max-height:120px;object-fit:cover;border-radius:50%;" />
            <img th:unless="${user != null and !#strings.isEmpty(#strings.trim(user.avatarUrl))}" th:src="@{/img/avatar_default.jpg}" src="/img/avatar_default.jpg" alt="Avatar" width="120" height="120" loading="lazy" decoding="async" style="max-width:120px;max-height:120px;object-fit:cover;border-radius:50%;" />
            <button id="btnEditAvatar" class="avatar-edit-btn" title="Đổi ảnh đại diện" type="button" style="display:none;position:absolute;bottom:6px;right:6px;background:rgba(0,0,0,0.6);border:none;border-radius:50%;padding:6px;cursor:pointer;"><i class="ti ti-camera" style="color:#fff;font-size:18px;"></i></button>
          </span>
                </div>
                <div class="profile-titles" style="text-align:center;">
                    <h2 style="margin-bottom:2px;">Trang cá nhân</h2>
                    <div class="footer-note">Seller ID: <b id="profileSellerId" th:text="${sellerId}">-</b> • <span class="chip" th:text="${user != null ? user.userType : 'SELLER'}">SELLER</span></div>
                </div>
            </div>
        </div>
        <div class="body profile-body">
            <div class="profile-grid" style="gap:10px;">
                <div class="profile-col">
                    <div class="label">Tên</div>
                    <div id="profile_username" class="value" style="font-weight:400;" th:text="${user != null and user.username != null ? user.username : '-'}">-</div>
                    <div class="label">Email</div>
                    <div id="profile_email" class="value" style="font-weight:400;" th:text="${user != null and user.email != null ? user.email : '-'}">-</div>
                </div>
                <div class="profile-col">
                    <div class="label">Số điện thoại</div>
                    <div id="profile_phone" class="value" style="font-weight:400;" th:text="${user != null and user.phoneNumber != null ? user.phoneNumber : '-'}">-</div>
                    <div class="label">Giới tính</div>
                    <div id="profile_gender" class="value" style="font-weight:400;" th:text="${user != null and user.gender != null ? user.gender : '-'}">-</div>
                    <div class="label">Ngày sinh</div>
                    <div id="profile_dob" class="value" style="font-weight:400;" th:text="${(user != null and user.birthDate != null) ? #temporals.format(user.birthDate, 'dd/MM/yyyy') : '-'}">-</div>
                </div>
            </div>
        </div>
        <div class="modal-actions" style="padding:12px;display:flex;gap:8px;justify-content:center;">
            <button id="btnBackToDashboard" type="button" class="btn"><i class="ti ti-arrow-left" style="margin-right:6px;"></i>Quay lại</button>
            <button id="btnOpenEditProfile" type="button" class="btn primary"><i class="ti ti-edit" style="margin-right:6px;"></i>Chỉnh sửa</button>
        </div>
    </section>
    <section id="ordersPanel" class="card section-card" hidden data-panel="orders">
        <div class="header" style="align-items:center;gap:12px;flex-wrap:wrap;">
            <div style="font-weight:700;flex:1;min-width:180px;">Quản lý đơn hàng</div>
            <div class="filter-row" style="display:flex;flex-wrap:wrap;gap:6px;align-items:center;">
                <input id="ord_search" type="text" placeholder="Tìm (#ID / username)" class="input" style="min-width:160px;" />
                <input id="ord_from" type="datetime-local" class="input" />
                <input id="ord_to" type="datetime-local" class="input" />
                <button id="ord_btnFilter" type="button" class="btn">Lọc</button>
                <button id="ord_btnReset" type="button" class="btn" title="Xóa bộ lọc"><i class="ti ti-restore"></i></button>
                <button id="ord_btnExport" type="button" class="btn" title="Xuất CSV"><i class="ti ti-download"></i></button>
            </div>
        </div>
        <div class="body" style="overflow:auto;">
            <table class="table slim" style="width:100%;min-width:720px;">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Ngày tạo</th>
                    <th>User</th>
                    <th>Số lượng (của bạn)</th>
                    <th>Doanh thu (của bạn)</th>
                </tr>
                </thead>
                <tbody id="tbSellerOrders"></tbody>
            </table>
            <div id="pgSellerOrders" class="pager" style="margin-top:8px;display:flex;flex-wrap:wrap;gap:4px;"></div>
        </div>
    </section>
    <section id="keysPanel" class="card section-card" hidden data-panel="keys">
        <div class="header" style="align-items:center;gap:12px;flex-wrap:wrap;">
            <div style="font-weight:700;flex:1;min-width:140px;">Quản lý key</div>
            <div class="filter-row" style="display:flex;flex-wrap:wrap;gap:6px;align-items:center;">
                <select id="key_product" class="input" style="min-width:140px;"><option value="">Sản phẩm</option></select>
                <select id="key_active" class="input"><option value="">Trạng thái</option><option value="true">Active</option><option value="false">Inactive</option></select>
                <input id="key_search" class="input" type="text" placeholder="Tìm key" style="min-width:120px;" />
                <button id="key_btnFilter" class="btn" type="button">Lọc</button>
                <button id="key_btnReset" class="btn" type="button" title="Xóa bộ lọc"><i class="ti ti-restore"></i></button>
            </div>
        </div>
        <div class="body" style="overflow:auto;">
            <table class="table slim" style="width:100%;min-width:780px;">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Key</th>
                    <th>Sản phẩm</th>
                    <th>Đơn hàng</th>
                    <th>Active</th>
                    <th>Kích hoạt</th>
                    <th>Thiết bị</th>
                    <th></th>
                </tr>
                </thead>
                <tbody id="tbSellerKeys"></tbody>
            </table>
            <div id="pgSellerKeys" class="pager" style="margin-top:8px;display:flex;flex-wrap:wrap;gap:4px;"></div>
        </div>
    </section>
    <section id="profileSettingsPanel" class="card section-card" hidden data-panel="profile-settings">
        <div class="header"><div style="font-weight:700">Cài đặt profile</div></div>
        <div class="body"><div class="footer-note">Bạn có thể sử dụng nút "Chỉnh sửa trang cá nhân" trong panel Trang cá nhân. Phần Cài đặt profile sẽ gom các tuỳ chọn nâng cao (2FA, bảo mật, v.v.).</div></div>
    </section>
</section>
